"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[565],{3313:(e,t,r)=>{r.d(t,{Venn:()=>B});var n=r(5971),a=r(5113),i=r(565),s=r(3591);class o extends a.Q{setupDefaultRules(){super.setupDefaultRules();const e=this.rule.bind(this);e("Venn").setAll({legendLabelText:"{category}",legendValueText:"{value}",colors:s.U.new(this._root,{}),width:i.AQ,height:i.AQ}),e("Label",["venn"]).setAll({text:"{category}",populateText:!0,centerX:i.CI,centerY:i.CI})}}var h=r(3792),u=r(9620),l=r(5368),f=r(7919),c=r(6343),x=r(1918),g=r(4628),p=r(4921),v=r(6683);function d(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function m(e,t){return d(e).map((function(){return d(t)}))}function y(e,t){for(var r=0,n=0;n<e.length;++n)r+=e[n]*t[n];return r}function b(e){return Math.sqrt(y(e,e))}function M(e,t,r){for(var n=0;n<t.length;++n)e[n]=t[n]*r}function w(e,t,r,n,a){for(var i=0;i<e.length;++i)e[i]=t*r[i]+n*a[i]}function I(e,t,r){var n,a=(r=r||{}).maxIterations||200*t.length,i=r.nonZeroDelta||1.05,s=r.zeroDelta||.001,o=r.minErrorDelta||1e-6,h=r.minErrorDelta||1e-5,u=void 0!==r.rho?r.rho:1,l=void 0!==r.chi?r.chi:2,f=void 0!==r.psi?r.psi:-.5,c=void 0!==r.sigma?r.sigma:.5,x=t.length,g=new Array(x+1);g[0]=t,g[0].fx=e(t),g[0].id=0;for(var p=0;p<x;++p){var v=t.slice();v[p]=v[p]?v[p]*i:s,g[p+1]=v,g[p+1].fx=e(v),g[p+1].id=p+1}function d(e){for(var t=0;t<e.length;t++)g[x][t]=e[t];g[x].fx=e.fx}for(var m=function(e,t){return e.fx-t.fx},y=t.slice(),b=t.slice(),M=t.slice(),I=t.slice(),D=0;D<a;++D){if(g.sort(m),r.history){var z=g.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));z.sort((function(e,t){return e.id-t.id})),r.history.push({x:g[0].slice(),fx:g[0].fx,simplex:z})}for(n=0,p=0;p<x;++p)n=Math.max(n,Math.abs(g[0][p]-g[1][p]));if(Math.abs(g[0].fx-g[x].fx)<o&&n<h)break;for(p=0;p<x;++p){y[p]=0;for(var P=0;P<x;++P)y[p]+=g[P][p];y[p]/=x}var _=g[x];if(w(b,1+u,y,-u,_),b.fx=e(b),b.fx<g[0].fx)w(I,1+l,y,-l,_),I.fx=e(I),I.fx<b.fx?d(I):d(b);else if(b.fx>=g[x-1].fx){var R=!1;if(b.fx>_.fx?(w(M,1+f,y,-f,_),M.fx=e(M),M.fx<_.fx?d(M):R=!0):(w(M,1-f*u,y,f*u,_),M.fx=e(M),M.fx<b.fx?d(M):R=!0),R){if(c>=1)break;for(p=1;p<g.length;++p)w(g[p],1-c,g[0],c,g[p]),g[p].fx=e(g[p])}}else d(b)}return g.sort(m),{fx:g[0].fx,x:g[0]}}function D(e,t,r,n,a,i,s){var o=r.fx,h=y(r.fxprime,t),u=o,l=o,f=h,c=0;function x(l,c,x){for(var g=0;g<16;++g)if(a=(l+c)/2,w(n.x,1,r.x,a,t),u=n.fx=e(n.x,n.fxprime),f=y(n.fxprime,t),u>o+i*a*h||u>=x)c=a;else{if(Math.abs(f)<=-s*h)return a;f*(c-l)>=0&&(c=l),l=a,x=u}return 0}a=a||1,i=i||1e-6,s=s||.1;for(var g=0;g<10;++g){if(w(n.x,1,r.x,a,t),u=n.fx=e(n.x,n.fxprime),f=y(n.fxprime,t),u>o+i*a*h||g&&u>=l)return x(c,a,l);if(Math.abs(f)<=-s*h)return a;if(f>=0)return x(a,c,u);l=u,c=a,a*=2}return a}function z(e,t,r){var n,a,i,s={x:t.slice(),fx:0,fxprime:t.slice()},o={x:t.slice(),fx:0,fxprime:t.slice()},h=t.slice(),u=1;i=(r=r||{}).maxIterations||20*t.length,s.fx=e(s.x,s.fxprime),M(n=s.fxprime.slice(),s.fxprime,-1);for(var l=0;l<i;++l){if(u=D(e,n,s,o,u),r.history&&r.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),alpha:u}),u){w(h,1,o.fxprime,-1,s.fxprime);var f=y(s.fxprime,s.fxprime);w(n,Math.max(0,y(h,o.fxprime)/f),n,-1,o.fxprime),a=s,s=o,o=a}else M(n,s.fxprime,-1);if(b(s.fxprime)<=1e-5)break}return r.history&&r.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),alpha:u}),s}var P=1e-10;function _(e,t){var r,n=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=r+1;n<e.length;++n)for(var a=A(e[r],e[n]),i=0;i<a.length;++i){var s=a[i];s.parentIndex=[r,n],t.push(s)}return t}(e),a=n.filter((function(t){return function(e,t){for(var r=0;r<t.length;++r)if(k(e,t[r])>t[r].radius+P)return!1;return!0}(t,e)})),i=0,s=0,o=[];if(a.length>1){var h=j(a);for(r=0;r<a.length;++r){var u=a[r];u.angle=Math.atan2(u.x-h.x,u.y-h.y)}a.sort((function(e,t){return t.angle-e.angle}));var l=a[a.length-1];for(r=0;r<a.length;++r){var f=a[r];s+=(l.x+f.x)*(f.y-l.y);for(var c={x:(f.x+l.x)/2,y:(f.y+l.y)/2},x=null,g=0;g<f.parentIndex.length;++g)if(l.parentIndex.indexOf(f.parentIndex[g])>-1){var p=e[f.parentIndex[g]],v=Math.atan2(f.x-p.x,f.y-p.y),d=Math.atan2(l.x-p.x,l.y-p.y),m=d-v;m<0&&(m+=2*Math.PI);var y=d-m/2,b=k(c,{x:p.x+p.radius*Math.sin(y),y:p.y+p.radius*Math.cos(y)});b>2*p.radius&&(b=2*p.radius),(null===x||x.width>b)&&(x={circle:p,width:b,p1:f,p2:l})}null!==x&&(o.push(x),i+=R(x.circle.radius,x.width),l=f)}}else{var M=e[0];for(r=1;r<e.length;++r)e[r].radius<M.radius&&(M=e[r]);var w=!1;for(r=0;r<e.length;++r)if(k(e[r],M)>Math.abs(M.radius-e[r].radius)){w=!0;break}w?i=s=0:(i=M.radius*M.radius*Math.PI,o.push({circle:M,p1:{x:M.x,y:M.y+M.radius},p2:{x:M.x-P,y:M.y+M.radius},width:2*M.radius}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=o,t.innerPoints=a,t.intersectionPoints=n),i+s}function R(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function k(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function O(e,t,r){if(r>=e+t)return 0;if(r<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var n=t-(r*r-e*e+t*t)/(2*r);return R(e,e-(r*r-t*t+e*e)/(2*r))+R(t,n)}function A(e,t){var r=k(e,t),n=e.radius,a=t.radius;if(r>=n+a||r<=Math.abs(n-a))return[];var i=(n*n-a*a+r*r)/(2*r),s=Math.sqrt(n*n-i*i),o=e.x+i*(t.x-e.x)/r,h=e.y+i*(t.y-e.y)/r,u=-(t.y-e.y)*(s/r),l=-(t.x-e.x)*(s/r);return[{x:o+u,y:h-l},{x:o-u,y:h+l}]}function j(e){for(var t={x:0,y:0},r=0;r<e.length;++r)t.x+=e[r].x,t.y+=e[r].y;return t.x/=e.length,t.y/=e.length,t}var S=1e-10;function C(e,t,r){return Math.min(e,t)*Math.min(e,t)*Math.PI<=r+S?Math.abs(e-t):function(e,t,r,n){var a=(n=n||{}).maxIterations||100,i=n.tolerance||1e-10,s=e(t),o=e(r),h=r-t;if(s*o>0)throw"Initial bisect points must have opposite signs";if(0===s)return t;if(0===o)return r;for(var u=0;u<a;++u){var l=t+(h/=2),f=e(l);if(f*s>=0&&(t=l),Math.abs(h)<i||0===f)return l}return t+h}((function(n){return O(e,t,n)-r}),0,e+t)}function L(e,t){var r=function(e,t){for(var r,n=t&&t.lossFunction?t.lossFunction:F,a={},i={},s=0;s<e.length;++s){var o=e[s];1==o.sets.length&&(r=o.sets[0],a[r]={x:1e10,y:1e10,rowid:a.length,size:o.size,radius:Math.sqrt(o.size/Math.PI)},i[r]=[])}for(e=e.filter((function(e){return 2==e.sets.length})),s=0;s<e.length;++s){var h=e[s],u=h.hasOwnProperty("weight")?h.weight:1,l=h.sets[0],f=h.sets[1];h.size+S>=Math.min(a[l].size,a[f].size)&&(u=0),i[l].push({set:f,size:h.size,weight:u}),i[f].push({set:l,size:h.size,weight:u})}var c=[];for(r in i)if(i.hasOwnProperty(r)){var x=0;for(s=0;s<i[r].length;++s)x+=i[r][s].size*i[r][s].weight;c.push({set:r,size:x})}function g(e,t){return t.size-e.size}c.sort(g);var p={};function v(e){return e.set in p}function d(e,t){a[t].x=e.x,a[t].y=e.y,p[t]=!0}for(d({x:0,y:0},c[0].set),s=1;s<c.length;++s){var m=c[s].set,y=i[m].filter(v);if(r=a[m],y.sort(g),0===y.length)throw"ERROR: missing pairwise overlap information";for(var b=[],M=0;M<y.length;++M){var w=a[y[M].set],I=C(r.radius,w.radius,y[M].size);b.push({x:w.x+I,y:w.y}),b.push({x:w.x-I,y:w.y}),b.push({y:w.y+I,x:w.x}),b.push({y:w.y-I,x:w.x});for(var D=M+1;D<y.length;++D)for(var z=a[y[D].set],P=C(r.radius,z.radius,y[D].size),_=A({x:w.x,y:w.y,radius:I},{x:z.x,y:z.y,radius:P}),R=0;R<_.length;++R)b.push(_[R])}var k=1e50,O=b[0];for(M=0;M<b.length;++M){a[m].x=b[M].x,a[m].y=b[M].y;var j=n(a,e);j<k&&(k=j,O=b[M])}d(O,m)}return a}(e,t),n=t.lossFunction||F;if(e.length>=8){var a=function(e,t){t=t||{};var r,n=t.restarts||10,a=[],i={};for(r=0;r<e.length;++r){var s=e[r];1==s.sets.length&&(i[s.sets[0]]=a.length,a.push(s))}var o=function(e,t,r){var n=m(t.length,t.length),a=m(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var i=r[e.sets[0]],s=r[e.sets[1]],o=C(Math.sqrt(t[i].size/Math.PI),Math.sqrt(t[s].size/Math.PI),e.size);n[i][s]=n[s][i]=o;var h=0;e.size+1e-10>=Math.min(t[i].size,t[s].size)?h=1:e.size<=1e-10&&(h=-1),a[i][s]=a[s][i]=h})),{distances:n,constraints:a}}(e,a,i),h=o.distances,u=o.constraints,l=b(h.map(b))/h.length;h=h.map((function(e){return e.map((function(e){return e/l}))}));var f,c,x=function(e,t){return function(e,t,r,n){var a,i=0;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<r.length;++a)for(var s=e[2*a],o=e[2*a+1],h=a+1;h<r.length;++h){var u=e[2*h],l=e[2*h+1],f=r[a][h],c=n[a][h],x=(u-s)*(u-s)+(l-o)*(l-o),g=Math.sqrt(x),p=x-f*f;c>0&&g<=f||c<0&&g>=f||(i+=2*p*p,t[2*a]+=4*p*(s-u),t[2*a+1]+=4*p*(o-l),t[2*h]+=4*p*(u-s),t[2*h+1]+=4*p*(l-o))}return i}(e,t,h,u)};for(r=0;r<n;++r){c=z(x,d(2*h.length).map(Math.random),t),(!f||c.fx<f.fx)&&(f=c)}var g=f.x,p={};for(r=0;r<a.length;++r){var v=a[r];p[v.sets[0]]={x:g[2*r]*l,y:g[2*r+1]*l,radius:Math.sqrt(v.size/Math.PI)}}if(t.history)for(r=0;r<t.history.length;++r)M(t.history[r].x,l);return p}(e,t);n(a,e)+1e-8<n(r,e)&&(r=a)}return r}function F(e,t){var r=0;for(var n=0;n<t.length;++n){var a,i=t[n];if(1!=i.sets.length){if(2==i.sets.length){var s=e[i.sets[0]],o=e[i.sets[1]];a=O(s.radius,o.radius,k(s,o))}else a=_(i.sets.map((function(t){return e[t]})));r+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return r}function T(e,t,r){var n;if(null===r?e.sort((function(e,t){return t.radius-e.radius})):e.sort(r),e.length>0){var a=e[0].x,i=e[0].y;for(n=0;n<e.length;++n)e[n].x-=a,e[n].y-=i}2==e.length&&(k(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y));if(e.length>1){var s,o,h=Math.atan2(e[1].x,e[1].y)-t,u=Math.cos(h),l=Math.sin(h);for(n=0;n<e.length;++n)s=e[n].x,o=e[n].y,e[n].x=u*s-l*o,e[n].y=l*s+u*o}if(e.length>2){for(var f=Math.atan2(e[2].x,e[2].y)-t;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;if(f>Math.PI){var c=e[1].y/(1e-10+e[1].x);for(n=0;n<e.length;++n){var x=(e[n].x+c*e[n].y)/(1+c*c);e[n].x=2*x-e[n].x,e[n].y=2*x*c-e[n].y}}}}function q(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}function E(e,t,r){null===t&&(t=Math.PI/2);var n,a,i=[];for(a in e)if(e.hasOwnProperty(a)){var s=e[a];i.push({x:s.x,y:s.y,radius:s.radius,setid:a})}var o=function(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}function r(e,r){var n=t(e),a=t(r);n.parent=a}e.map((function(e){e.parent=e}));for(var n=0;n<e.length;++n)for(var a=n+1;a<e.length;++a){var i=e[n].radius+e[a].radius;k(e[n],e[a])+1e-10<i&&r(e[a],e[n])}var s,o={};for(n=0;n<e.length;++n)(s=t(e[n]).parent.setid)in o||(o[s]=[]),o[s].push(e[n]);e.map((function(e){delete e.parent}));var h=[];for(s in o)o.hasOwnProperty(s)&&h.push(o[s]);return h}(i);for(n=0;n<o.length;++n){T(o[n],t,r);var h=q(o[n]);o[n].size=(h.xRange.max-h.xRange.min)*(h.yRange.max-h.yRange.min),o[n].bounds=h}o.sort((function(e,t){return t.size-e.size}));var u=(i=o[0]).bounds,l=(u.xRange.max-u.xRange.min)/50;function f(e,t,r){if(e){var n,a,s,o=e.bounds;t?n=u.xRange.max-o.xRange.min+l:(n=u.xRange.max-o.xRange.max,(s=(o.xRange.max-o.xRange.min)/2-(u.xRange.max-u.xRange.min)/2)<0&&(n+=s)),r?a=u.yRange.max-o.yRange.min+l:(a=u.yRange.max-o.yRange.max,(s=(o.yRange.max-o.yRange.min)/2-(u.yRange.max-u.yRange.min)/2)<0&&(a+=s));for(var h=0;h<e.length;++h)e[h].x+=n,e[h].y+=a,i.push(e[h])}}for(var c=1;c<o.length;)f(o[c],!0,!1),f(o[c+1],!1,!0),f(o[c+2],!0,!0),c+=3,u=q(i);var x={};for(n=0;n<i.length;++n)x[i[n].setid]=i[n];return x}r(3546);function H(e,t,r){var n,a,i=t[0].radius-k(t[0],e);for(n=1;n<t.length;++n)(a=t[n].radius-k(t[n],e))<=i&&(i=a);for(n=0;n<r.length;++n)(a=k(r[n],e)-r[n].radius)<=i&&(i=a);return i}function N(e,t){var r,n=[];for(r=0;r<e.length;++r){var a=e[r];n.push({x:a.x,y:a.y}),n.push({x:a.x+a.radius/2,y:a.y}),n.push({x:a.x-a.radius/2,y:a.y}),n.push({x:a.x,y:a.y+a.radius/2}),n.push({x:a.x,y:a.y-a.radius/2})}var i=n[0],s=H(n[0],e,t);for(r=1;r<n.length;++r){var o=H(n[r],e,t);o>=s&&(i=n[r],s=o)}var h=I((function(r){return-1*H({x:r[0],y:r[1]},e,t)}),[i.x,i.y],{maxIterations:500,minErrorDelta:1e-10}).x,u={x:h[0],y:h[1]},l=!0;for(r=0;r<e.length;++r)if(k(u,e[r])>e[r].radius){l=!1;break}for(r=0;r<t.length;++r)if(k(u,t[r])<t[r].radius){l=!1;break}if(!l)if(1==e.length)u={x:e[0].x,y:e[0].y};else{var f={};_(e,f),u=0===f.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==f.arcs.length?{x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:t.length?N(e,[]):j(f.arcs.map((function(e){return e.p1})))}return u}function V(e){var t={},r=[];for(var n in e)r.push(n),t[n]=[];for(var a=0;a<r.length;a++)for(var i=e[r[a]],s=a+1;s<r.length;++s){var o=e[r[s]],h=k(i,o);h+o.radius<=i.radius+1e-10?t[r[s]].push(r[a]):h+i.radius<=o.radius+1e-10&&t[r[a]].push(r[s])}return t}function W(e,t){for(var r={},n=V(e),a=0;a<t.length;++a){for(var i=t[a].sets,s={},o={},h=0;h<i.length;++h){s[i[h]]=!0;for(var u=n[i[h]],l=0;l<u.length;++l)o[u[l]]=!0}var f=[],c=[];for(var x in e)x in s?f.push(e[x]):x in o||c.push(e[x]);var g=N(f,c);r[i]=g,g.disjoint&&t[a].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return r}function G(e){var t={};_(e,t);var r=t.arcs;if(0===r.length)return"M 0 0";if(1==r.length){var n=r[0].circle;return function(e,t,r){var n=[];return n.push("\nM",e,t),n.push("\nm",-r,0),n.push("\na",r,r,0,1,0,2*r,0),n.push("\na",r,r,0,1,0,2*-r,0),n.join(" ")}(n.x,n.y,n.radius)}for(var a=["\nM",r[0].p2.x,r[0].p2.y],i=0;i<r.length;++i){var s=r[i],o=s.circle.radius,h=s.width>o;a.push("\nA",o,o,0,h?1:0,1,s.p1.x,s.p1.y)}return a.join(" ")}class B extends h.F{constructor(){super(...arguments),Object.defineProperty(this,"_sets",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.W.new(this._root,{}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.W.new(this._root,{}))}),Object.defineProperty(this,"hoverGraphics",{enumerable:!0,configurable:!0,writable:!0,value:this.slicesContainer.children.push(l.T.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_hovered",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this._makeSlices()}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this._makeLabels()})}_afterNew(){this._defaultThemes.push(o.new(this._root)),this.fields.push("intersections","category","fill"),super._afterNew()}makeSlice(e){const t=this.slicesContainer.children.push(this.slices.make());return t.events.on("pointerover",(e=>{this._hovered=e.target,this._updateHover()})),t.events.on("pointerout",(()=>{this._hovered=void 0,this.hoverGraphics.hide()})),t.on("fill",(()=>{this.updateLegendMarker(e)})),t.on("stroke",(()=>{this.updateLegendMarker(e)})),t._setDataItem(e),e.set("slice",t),this.slices.push(t),t}_updateHover(){if(this._hovered){const e=this.hoverGraphics;e.set("svgPath",this._hovered.get("svgPath")),e.show(),e.toFront()}}makeLabel(e){const t=this.labelsContainer.children.push(this.labels.make());return t._setDataItem(e),e.set("label",t),this.labels.push(t),t}_makeSlices(){return new x.o(u.YS.new({}),(()=>l.T._new(this._root,{themeTags:g.Fy(this.slices.template.get("themeTags",[]),["venn","series"])},[this.slices.template])))}_makeLabels(){return new x.o(u.YS.new({}),(()=>c._._new(this._root,{themeTags:g.Fy(this.labels.template.get("themeTags",[]),["venn","series"])},[this.labels.template])))}processDataItem(e){if(super.processDataItem(e),null==e.get("fill")){let t=this.get("colors");t&&e.setRaw("fill",t.next())}this.makeSlice(e),this.makeLabel(e)}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty||this._sizeDirty){const e=[];p.S6(this.dataItems,(t=>{const r={},n=t.get("intersections");r.sets=n||[t.get("category")],r.size=t.get("valueWorking"),r.size>0&&e.push(r)}));const t=e.toString();if(this._sets=t,e.length>0){let t=function(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var r=t.initialLayout||L,n=t.lossFunction||F;e=function(e){e=e.slice();var t,r,n,a,i=[],s={};for(t=0;t<e.length;++t){var o=e[t];1==o.sets.length?i.push(o.sets[0]):2==o.sets.length&&(s[[n=o.sets[0],a=o.sets[1]]]=!0,s[[a,n]]=!0)}for(i.sort((function(e,t){return e>t})),t=0;t<i.length;++t)for(n=i[t],r=t+1;r<i.length;++r)[n,a=i[r]]in s||e.push({sets:[n,a],size:0});return e}(e);var a,i=r(e,t),s=[],o=[];for(a in i)i.hasOwnProperty(a)&&(s.push(i[a].x),s.push(i[a].y),o.push(a));for(var h=I((function(t){for(var r={},a=0;a<o.length;++a){var s=o[a];r[s]={x:t[2*a],y:t[2*a+1],radius:i[s].radius}}return n(r,e)}),s,t),u=h.x,l=0;l<o.length;++l)a=o[l],i[a].x=u[2*l],i[a].y=u[2*l+1];return i}(e);t=E(t,null,null),t=function(e,t,r,n){var a=[],i=[];for(var s in e)e.hasOwnProperty(s)&&(i.push(s),a.push(e[s]));t-=2*n,r-=2*n;var o=q(a),h=o.xRange,u=o.yRange;if(h.max==h.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),e;for(var l=t/(h.max-h.min),f=r/(u.max-u.min),c=Math.min(f,l),x=(t-(h.max-h.min)*c)/2,g=(r-(u.max-u.min)*c)/2,p={},v=0;v<a.length;++v){var d=a[v];p[i[v]]={radius:c*d.radius,x:n+x+(d.x-h.min)*c,y:n+g+(d.y-u.min)*c}}return p}(t,this.innerWidth(),this.innerHeight(),0);const r={};for(let e in t){let n=t[e],a=n.radius;const i=this.getDataItemByCategory(e);if(i){const t=i.get("slice"),s=i.get("fill");t._setDefault("fill",s),t._setDefault("stroke",s),this.updateLegendMarker(i),t.set("svgPath","M"+n.x+","+n.y+" m -"+a+", 0 a "+a+","+a+" 0 1,1 "+2*a+",0 a "+a+","+a+" 0 1,1 -"+2*a+",0"),r[e]=n}}let n=W(r,e);p.S6(this.dataItems,(e=>{let t=e.get("category"),a=n[t];const i=e.get("intersections");if(i&&(t=i.toString(),a=n[t],a)){let t=i,n=[];for(let e=0;e<t.length;e++)n.push(r[t[e]]);let a=G(n),s=e.get("slice");const o=e.get("fill");s._setDefault("fill",o),s._setDefault("stroke",o),s.setAll({svgPath:a})}if(a){e.get("label").setAll({x:a.x,y:a.y})}this.updateLegendValue(e)}))}this._updateHover()}}getDataItemByCategory(e){return p.sE(this.dataItems,(t=>t.get("category")==e))}showDataItem(e,t){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,n.mG)(this,void 0,void 0,(function*(){const n=[r.showDataItem.call(this,e,t)];v.hj(t)||(t=this.get("stateAnimationDuration",0));const a=this.get("stateAnimationEasing");let i=e.get("value");const s=e.animate({key:"valueWorking",to:i,duration:t,easing:a});s&&n.push(s.waitForStop());const o=e.get("label");o&&n.push(o.show(t));const h=e.get("slice");h&&n.push(h.show(t));const u=e.get("intersections");if(u&&p.S6(u,(e=>{const r=this.getDataItemByCategory(e);r&&r.isHidden()&&this.showDataItem(r,t)})),!u){const r=e.get("category");p.S6(this.dataItems,(n=>{const a=n.get("intersections");if(n!=e&&a){let e=!0;p.S6(a,(t=>{const r=this.getDataItemByCategory(t);r&&r.isHidden()&&(e=!1)})),e&&-1!=a.indexOf(r)&&n.isHidden()&&this.showDataItem(n,t)}}))}yield Promise.all(n)}))}hideDataItem(e,t){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,n.mG)(this,void 0,void 0,(function*(){const n=[r.hideDataItem.call(this,e,t)],a=this.states.create("hidden",{});v.hj(t)||(t=a.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const i=a.get("stateAnimationEasing",this.get("stateAnimationEasing")),s=e.animate({key:"valueWorking",to:0,duration:t,easing:i});s&&n.push(s.waitForStop());const o=e.get("label");o&&n.push(o.hide(t));const h=e.get("slice");h&&(n.push(h.hide(t)),h.hideTooltip()),e.get("intersections")||p.S6(this.dataItems,(r=>{const n=r.get("intersections");r!=e&&n&&-1!=n.indexOf(e.get("category"))&&this.hideDataItem(r,t)})),yield Promise.all(n)}))}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("label");t&&(this.labels.removeValue(t),t.dispose());let r=e.get("slice");r&&(this.slices.removeValue(r),r.dispose())}updateLegendMarker(e){const t=e.get("slice");if(t){const r=e.get("legendDataItem");if(r){const e=r.get("markerRectangle");p.S6(l.u,(r=>{e.set(r,t.get(r))}))}}}hoverDataItem(e){const t=e.get("slice");t&&!t.isHidden()&&t.hover()}unhoverDataItem(e){const t=e.get("slice");t&&t.unhover()}}Object.defineProperty(B,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Venn"}),Object.defineProperty(B,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.F.classNames.concat([B.className])})}}]);
//# sourceMappingURL=json_venn.096d6ab8.chunk.js.map